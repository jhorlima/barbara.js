/*
 BarbaraJS v1.1.0
 (c) 2016 Jhordan Lima. https://github.com/Jhorzyto/barbara.js
 License: MIT
 */
var barbaraJs=angular.module("Barbara-Js",[]);barbaraJs.run(function(){angular.element(document).find("head").prepend("<style type='text/css'>.glyphicon.spinning{animation:spin 1s infinite linear;-webkit-animation:spin2 1s infinite linear}@keyframes spin{from{transform:scale(1) rotate(0)}to{transform:scale(1) rotate(360deg)}}@-webkit-keyframes spin2{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}</style>")});
barbaraJs.factory("$request",["$http",function(a){var d=function(a){return{code:a.status,error_message:200==a.status?"Bad structure response!":a.statusText}},c=function(a,c,b,g){angular.isDefined(c.callbackLoad)&&c.callbackLoad.loaded();c.checkMeta?angular.isObject(a.data)?angular.isObject(a.data.meta)&&angular.isDefined(a.data.meta.code)?(200<=a.data.meta.code&&299>=a.data.meta.code?b(a.data.data,a.data.meta,a):g(a.data.meta,a.status,a),angular.forEach(c.callback,function(b){this.code==b.metaCode&&
b.callback(a.data.data,a.data.meta,a)},a.data.meta)):g(d(a),a.status,a):g(d(a),a.status,a):b(a)},e=function(a,c,b){angular.isDefined(c.callbackLoad)&&c.callbackLoad.loaded();b(d(a),a.status,a)};return{parameter:{},data:{},headers:{},method:"GET",url:void 0,callback:[],callbackLoad:void 0,checkMeta:!0,config:{},checkResponse:function(a){this.checkMeta=a?!0:!1;return this},addCallback:function(a,c){angular.isNumber(a)&&angular.isFunction(c)&&this.callback.push({metaCode:a,callback:c});return this},
addMethod:function(a){this.method=angular.isString(a)?a:"GET";return this},addData:function(a){this.data=angular.isObject(a)?a:{};return this},addParams:function(a){this.parameter=angular.isObject(a)?a:{};return this},addHeaders:function(a){this.headers=angular.isObject(a)?a:{};return this},load:function(a,c){angular.isObject(a)&&angular.isFunction(a.loading)&&angular.isFunction(a.loaded)&&(c=a.loaded,a=a.loading);if(!angular.isFunction(a)||!angular.isFunction(c))throw"Load Callback invalid!";this.callbackLoad=
{onLoading:a,loaded:c};return this},get:function(a){this.url=angular.isString(a)?a:this.url;this.addMethod("GET");return angular.copy(this)},post:function(a){this.url=angular.isString(a)?a:this.url;this.addMethod("POST");return angular.copy(this)},put:function(a){this.url=angular.isString(a)?a:this.url;this.addMethod("PUT");return angular.copy(this)},"delete":function(a){this.url=angular.isString(a)?a:this.url;this.addMethod("DELETE");return angular.copy(this)},send:function(d,f){var b=this;if(!angular.isFunction(d))throw"Success Callback invalid in $request!";
angular.isFunction(f)||(f=function(){});if(!angular.isDefined(b.url))throw"No url defined in the request methods!";if(angular.isDefined(b.callbackLoad))b.callbackLoad.onLoading();b.config.headers=b.headers;switch(b.method){case "GET":angular.extend(b.parameter,b.data);b.config.params=b.parameter;a.get(b.url,b.config).then(function(a){c(a,b,d,f)},function(a){e(a,b,f)});break;case "POST":b.config.params=b.parameter;a.post(b.url,b.data,b.config).then(function(a){c(a,b,d,f)},function(a){e(a,b,f)});break;
case "PUT":b.config.params=b.parameter;a.put(b.url,b.data,b.config).then(function(a){c(a,b,d,f)},function(a){e(a,b,f)});break;case "DELETE":b.config.params=b.parameter,b.config.data=b.data,a["delete"](b.url,b.config).then(function(a){c(a,b,d,f)},function(a){e(a,b,f)})}}}}]);
barbaraJs.factory("bootstrap",function(){return{alert:function(){return{show:!1,changeShow:function(a){this.show=angular.isDefined(a)?a:!this.show},type:void 0,changeType:function(a){this.type=angular.isString(a)?a:this.type},title:void 0,changeTitle:function(a){this.title=angular.isString(a)?a:this.title},message:void 0,changeMessage:function(a){this.message=angular.isString(a)?a:this.message},responseSuccess:function(a){angular.isString(a)&&(this.changeTitle("Parab\u00e9ns!"),this.changeType("success"),
this.changeMessage(a),this.changeShow(!0))},responseError:function(a){this.changeTitle("Algo deu errado!");this.changeType("danger");angular.isDefined(a.error_message)&&angular.isString(a.error_message)?(this.changeMessage(a.error_message),this.changeType("warning")):this.changeMessage("Ocorreu um erro na requisi\u00e7\u00e3o! Talvez o servidor esteja em manuten\u00e7\u00e3o.");this.changeShow(!0)}}},loading:function(){return{show:!1,changeShow:function(a){this.show=angular.isDefined(a)?a:!this.show},
message:"Carregando...",changeMessage:function(a){this.message=angular.isString(a)?a:this.message},onLoading:function(a){this.message=angular.isString(a)?a:this.message;this.changeShow(!0)},loaded:function(){this.changeShow(!1)},getRequestLoad:function(a){var d=this;return{loading:function(){d.onLoading(a)},loaded:function(){d.loaded()}}}}},pagination:function(){return{pages:0,currentPage:1,pagination:[],callback:void 0,changePageCallback:function(a){this.callback=angular.isFunction(a)?a:this.callback},
changePages:function(a){this.pages=angular.isNumber(a)?a:this.pages;this.processPagination()},changeCurrentPage:function(a){this.currentPage=angular.isNumber(a)&&0<a&&a<=this.pages?a:this.currentPage;return a==this.currentPage?!0:!1},processPagination:function(){0!=this.pages&&(this.pagination=[],this.pagination.push({item:1,role:0<this.pages}),this.pagination.push({item:9>=this.pages?2:5>=this.currentPage?2:void 0,role:2<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?
3:this.currentPage+5>=this.pages?this.pages-6:this.currentPage-2,role:3<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?4:this.currentPage+5>=this.pages?this.pages-5:this.currentPage-1,role:4<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?5:this.currentPage+5>=this.pages?this.pages-4:this.currentPage,role:5<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?6:this.currentPage+5>=this.pages?this.pages-3:this.currentPage+
1,role:6<this.pages}),this.pagination.push({item:9>=this.pages||5>=this.currentPage?7:this.currentPage+5>=this.pages?this.pages-2:this.currentPage+2,role:7<this.pages}),this.pagination.push({item:9>=this.pages?8:10==this.pages&&5==this.currentPage?void 0:this.currentPage+5>=this.pages?this.pages-1:void 0,role:8<this.pages}),this.pagination.push({item:this.pages,role:1<this.pages}),angular.forEach(this.pagination,function(a){a["class"]={active:this.currentPage==a.item,disabled:angular.isUndefined(a.item)}},
this))},clickAction:function(a){angular.isDefined(a)&&this.changeCurrentPage(a)&&(angular.isFunction(this.callback)?(this.changePages(0),this.callback(this)):this.processPagination())}}}}});
barbaraJs.factory("animateCss",["$timeout",function(a){return{open:!0,animated:{inAnimate:!1,opening:!1,closing:!1},animateChange:function(){var d=this;d.animated.inAnimate=!0;this.open?d.animated.opening=!0:d.animated.closing=!0;a(function(){d.animated.opening=!1;d.animated.closing=!1;d.animated.inAnimate=!1},700)},animateClass:function(a,c){var e={animated:this.animated.inAnimate};angular.isDefined(a)&&angular.isString(a)&&(e[a]=this.animated.opening);angular.isDefined(c)&&angular.isString(c)&&
(e[c]=this.animated.closing);return e}}}]);barbaraJs.directive("alertBootstrap",function(){return{restrict:"A",template:"<div class='alert alert-{{alert.type}} alert-dismissible' role='alert' ng-if='alert.show'><button type='button' class='close' ng-click='alert.changeShow()'><span aria-hidden='true'>&times;</span></button><strong>{{alert.title}}</strong> {{alert.message}}</div>"}});barbaraJs.directive("loadingBootstrap",function(){return{restrict:"A",template:"<div class='progress' ng-if='loading.show'> <div class='progress-bar progress-bar-striped active' role='progressbar' style='width: 100%'><i class='glyphicon glyphicon-refresh spinning'></i> <strong>{{loading.message}}</strong></div></div>"}});
barbaraJs.directive("paginationBootstrap",function(){return{restrict:"A",template:"<nav ng-if='pagination.pages > 0'> <ul class='pagination'> <li ng-repeat='page in pagination.pagination' ng-if='page.role' ng-class='page.class'> <a href='' ng-click='pagination.clickAction(page.item)'>{{page.item ? page.item : '...'}}</a> </li></ul> </nav>"}});
barbaraJs.filter("timeago",function(){return function(a){var d=(new Date).getTime();if(!a)return"indefinido";angular.isDate(a)?a=a.getTime():angular.isNumber(a)?a=(new Date(1E3*a)).getTime():angular.isString(a)&&(a=(new Date(a)).getTime());if(!angular.isNumber(a))return"Data invalida";var c=Math.abs((d-a)/1E3),e=[],e=60>=c?["","agora"]:3600>c?[Math.round(Math.abs(c/60)),"m"]:86400>c?[Math.round(Math.abs(c/3600)),"h"]:604800>c?[Math.round(Math.abs(c/86400)),"d"]:31449600>c?[Math.round(Math.abs(c/604800)),
"sm"]:315569260>c?[Math.round(Math.abs(c/31556926)),"a"]:["","..."],e=e.join("");return a<=d?"h\u00e1 "+e+"":e}});barbaraJs.filter("cuttext",function(){return function(a,d,c,e){if(!a||!angular.isString(a))return"";if(!c||!angular.isNumber(c))return a;c=parseInt(c,10);if(a.length<=c||d)return a;a=a.substr(0,c);d=a.lastIndexOf(" ");-1!=d&&(a=a.substr(0,d));return a+(e||" \u2026")}});
